{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext}from'react';import{Link}from'react-router-dom';import loginServices from'../services/login';import workoutServices from'../services/workouts';import UserContext from'../UserContext';import{useErrorMessageDispatch}from'../ErrorMessageContext';import'./LoginForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(_ref){var username=_ref.username,setUsername=_ref.setUsername,password=_ref.password,setPassword=_ref.setPassword;var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),user=_useContext2[0],userDispatch=_useContext2[1];var errorMessageDispatch=useErrorMessageDispatch();var handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var loggedInUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return loginServices.login({username:username,password:password});case 4:loggedInUser=_context.sent;window.localStorage.setItem('loggedFitnessAppUser',JSON.stringify(loggedInUser));workoutServices.setToken(loggedInUser.token);setUsername('');setPassword('');userDispatch({type:\"LOG IN\",user:loggedInUser});_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);errorMessageDispatch({type:\"SET_ERROR\",message:\"username or password invalid\"});case 15:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));return function handleLogin(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:function onChange(_ref3){var target=_ref3.target;return setUsername(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:function onChange(_ref4){var target=_ref4.target;return setPassword(target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"register-link\",children:\"Dont have an account? Register here.\"})]})});};export default LoginForm;","map":{"version":3,"names":["useContext","Link","loginServices","workoutServices","UserContext","useErrorMessageDispatch","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","username","setUsername","password","setPassword","_useContext","_useContext2","_slicedToArray","user","userDispatch","errorMessageDispatch","handleLogin","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","loggedInUser","wrap","_callee$","_context","prev","next","preventDefault","login","sent","window","localStorage","setItem","JSON","stringify","setToken","token","type","t0","message","stop","_x","apply","arguments","className","children","onSubmit","htmlFor","id","value","onChange","_ref3","target","_ref4","to"],"sources":["/Users/jasonramirez/Desktop/fitness-app/frontend/src/components/LoginForm.js"],"sourcesContent":["import { useContext } from 'react'\nimport { Link } from 'react-router-dom'\nimport loginServices from '../services/login'\nimport workoutServices from '../services/workouts'\nimport UserContext from '../UserContext' \nimport { useErrorMessageDispatch } from '../ErrorMessageContext' \nimport './LoginForm.css'\n\nconst LoginForm = ({ username, setUsername, password, setPassword }) => {\n  \n  const [user, userDispatch] = useContext(UserContext)\n  const errorMessageDispatch = useErrorMessageDispatch()\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n        const loggedInUser = await loginServices.login({ username, password })\n        window.localStorage.setItem('loggedFitnessAppUser', JSON.stringify(loggedInUser))\n        workoutServices.setToken(loggedInUser.token)\n        setUsername('')\n        setPassword('')\n        userDispatch({ type: \"LOG IN\", user: loggedInUser })\n    } catch(exception) {\n        errorMessageDispatch( {type: \"SET_ERROR\", message: \"username or password invalid\"} )\n    }\n}\n\n return (\n    <div className=\"login-container\">\n      <form className=\"login-form\" onSubmit={handleLogin}>\n        <div className=\"form-group\">\n          <label htmlFor=\"username\">Username</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            value={username}\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={({ target }) => setPassword(target.value)}\n          />\n        </div>\n        <button type=\"submit\">Login</button>\n        <Link to=\"/register\" className=\"register-link\">\n          Dont have an account? Register here.\n        </Link>\n      </form>\n      {/*<label> View sample user profiles with the following username/password pairs: [username: sekuw, password: password], [username: zium, password: password] </label>*/}\n    </div>\n  )\n}\n\nexport default LoginForm\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}