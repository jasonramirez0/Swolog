{"ast":null,"code":"import _toConsumableArray from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useRef}from'react';import{Chart,registerables}from'chart.js';import'chartjs-plugin-annotation';import workoutServices from'../services/workouts';import'./UserProgressChart.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserProgressChart=function UserProgressChart(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userExercises=_useState2[0],setUserExercises=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredUserExercises=_useState4[0],setFilteredUserExercises=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userExerciseClusters=_useState6[0],setUserExerciseClusters=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),currentExercise=_useState8[0],setCurrentExercise=_useState8[1];var chartCanvasRef=useRef(null);var chartInstanceRef=useRef(null);useEffect(function(){var fetchUserWorkouts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userExercisesTemp,userExerciseClustersTemp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return workoutServices.getUserWorkoutExercises();case 2:userExercisesTemp=_context.sent;setUserExercises(userExercisesTemp);setFilteredUserExercises(userExercisesTemp);_context.next=7;return workoutServices.getUserClusters(userExercisesTemp[0].toLowerCase());case 7:userExerciseClustersTemp=_context.sent;setCurrentExercise(userExercisesTemp[0]);setUserExerciseClusters(userExerciseClustersTemp);case 10:case\"end\":return _context.stop();}},_callee);}));return function fetchUserWorkouts(){return _ref.apply(this,arguments);};}();fetchUserWorkouts();},[]);useEffect(function(){var renderExerciseChart=function renderExerciseChart(){if(chartInstanceRef.current){// Destroy the existing chart instance if it exists\nchartInstanceRef.current.destroy();}Chart.register.apply(Chart,_toConsumableArray(registerables));var ctx=chartCanvasRef.current.getContext('2d');var chart=new Chart(ctx,{type:'line',data:{labels:userExerciseClusters.map(function(cluster){return new Date(cluster.createdAt).toLocaleDateString();}),datasets:[{label:'Weight',data:userExerciseClusters.map(function(cluster){return cluster.cluster.weight;}),backgroundColor:'rgba(0, 275, 275, 0.5)',borderColor:'rgb(225, 0, 0)',borderCapStyle:'butt',borderWidth:2,pointBackgroundColor:'rgba(0, 275, 275)'}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{type:'linear',beginAtZero:true}},elements:{point:{radius:5}}}});chartInstanceRef.current=chart;};renderExerciseChart();},[userExerciseClusters]);var includesIgnoreCase=function includesIgnoreCase(array,searchItem){return array.some(function(item){return item.toLowerCase()===searchItem.toLowerCase();});};var handleExerciseInputChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var userExerciseInputValue,filteredUserExercisesTemp,userExerciseClustersTemp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();userExerciseInputValue=event.target.value.toLowerCase();filteredUserExercisesTemp=userExercises.filter(function(exercise){return exercise.toLowerCase().startsWith(userExerciseInputValue);});setFilteredUserExercises(filteredUserExercisesTemp);if(!includesIgnoreCase(userExercises,userExerciseInputValue)){_context2.next=10;break;}_context2.next=7;return workoutServices.getUserClusters(userExerciseInputValue);case 7:userExerciseClustersTemp=_context2.sent;setUserExerciseClusters(userExerciseClustersTemp);setCurrentExercise(userExerciseClustersTemp[0].cluster.exercise.name);case 10:case\"end\":return _context2.stop();}},_callee2);}));return function handleExerciseInputChange(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"user-progress\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"choose-exercise\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Exercise: \"}),/*#__PURE__*/_jsx(\"input\",{list:\"exercises-list\",id:\"exercises\",placeholder:\"Choose an exercise...\",onChange:handleExerciseInputChange}),/*#__PURE__*/_jsx(\"datalist\",{id:\"exercises-list\",children:filteredUserExercises.map(function(exercise,index){return/*#__PURE__*/_jsxs(\"option\",{children:[\" \",exercise,\" \"]},index);})}),/*#__PURE__*/_jsxs(\"label\",{id:\"exercise-label\",children:[\" \",\"Current Exercise: \".concat(currentExercise)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"user-progress-chart\",children:/*#__PURE__*/_jsx(\"canvas\",{id:\"exerciseProgressChart\",ref:chartCanvasRef})})]});};export default UserProgressChart;","map":{"version":3,"names":["useState","useEffect","useRef","Chart","registerables","workoutServices","jsx","_jsx","jsxs","_jsxs","UserProgressChart","_useState","_useState2","_slicedToArray","userExercises","setUserExercises","_useState3","_useState4","filteredUserExercises","setFilteredUserExercises","_useState5","_useState6","userExerciseClusters","setUserExerciseClusters","_useState7","_useState8","currentExercise","setCurrentExercise","chartCanvasRef","chartInstanceRef","fetchUserWorkouts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userExercisesTemp","userExerciseClustersTemp","wrap","_callee$","_context","prev","next","getUserWorkoutExercises","sent","getUserClusters","toLowerCase","stop","apply","arguments","renderExerciseChart","current","destroy","register","_toConsumableArray","ctx","getContext","chart","type","data","labels","map","cluster","Date","createdAt","toLocaleDateString","datasets","label","weight","backgroundColor","borderColor","borderCapStyle","borderWidth","pointBackgroundColor","options","responsive","maintainAspectRatio","scales","y","beginAtZero","elements","point","radius","includesIgnoreCase","array","searchItem","some","item","handleExerciseInputChange","_ref2","_callee2","event","userExerciseInputValue","filteredUserExercisesTemp","_callee2$","_context2","preventDefault","target","value","filter","exercise","startsWith","name","_x","className","children","htmlFor","list","id","placeholder","onChange","index","concat","ref"],"sources":["/Users/jasonramirez/Desktop/fitness-app/frontend/src/components/UserProgressChart.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react'\nimport { Chart, registerables } from 'chart.js'\nimport 'chartjs-plugin-annotation';\nimport workoutServices from '../services/workouts'\nimport './UserProgressChart.css'\n\nconst UserProgressChart = () => {\n    const [userExercises, setUserExercises] = useState([])\n    const [filteredUserExercises, setFilteredUserExercises] = useState([])\n    const [userExerciseClusters, setUserExerciseClusters] = useState([])\n    const [currentExercise, setCurrentExercise] = useState('')\n    const chartCanvasRef = useRef(null)\n    const chartInstanceRef = useRef(null)\n\n    useEffect(() => {\n        const fetchUserWorkouts = async () => {\n            const userExercisesTemp = await workoutServices.getUserWorkoutExercises()\n            setUserExercises(userExercisesTemp)\n            setFilteredUserExercises(userExercisesTemp)\n\n            const userExerciseClustersTemp =  await workoutServices.getUserClusters(userExercisesTemp[0].toLowerCase())\n            setCurrentExercise(userExercisesTemp[0])\n            setUserExerciseClusters(userExerciseClustersTemp)\n        }\n\n        fetchUserWorkouts()\n    }, [])\n\n    useEffect(() => {\n        const renderExerciseChart = () => {\n            if (chartInstanceRef.current) {\n                // Destroy the existing chart instance if it exists\n                chartInstanceRef.current.destroy();\n            }\n            Chart.register(...registerables);\n            const ctx = chartCanvasRef.current.getContext('2d')\n            const chart = new Chart(ctx, {\n                type: 'line',\n                data: {\n                    labels: userExerciseClusters.map( cluster => new Date(cluster.createdAt).toLocaleDateString() ),\n                    datasets: [\n                        {\n                            label: 'Weight',\n                            data: userExerciseClusters.map(cluster => cluster.cluster.weight),\n                            backgroundColor: 'rgba(0, 275, 275, 0.5)',\n                            borderColor: 'rgb(225, 0, 0)',\n                            borderCapStyle: 'butt',\n                            borderWidth: 2,\n                            pointBackgroundColor: 'rgba(0, 275, 275)',\n                        }\n                    ]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        y: {\n                            type: 'linear',\n                            beginAtZero: true,\n                        },\n                    },\n                    elements: {\n                        point: {\n                            radius: 5,\n                        }\n                    },\n                }\n            })\n            chartInstanceRef.current = chart;\n        }\n\n        renderExerciseChart()\n    }, [userExerciseClusters])\n\n    const includesIgnoreCase = (array, searchItem) => {\n        return array.some(item => item.toLowerCase() === searchItem.toLowerCase())\n    }\n\n    const handleExerciseInputChange = async (event) => {  \n        event.preventDefault()      \n        const userExerciseInputValue = event.target.value.toLowerCase()\n        const filteredUserExercisesTemp = userExercises.filter(exercise => \n            exercise.toLowerCase().startsWith(userExerciseInputValue)\n        )\n        setFilteredUserExercises(filteredUserExercisesTemp)\n        if (includesIgnoreCase(userExercises, userExerciseInputValue)) {\n            const userExerciseClustersTemp = await workoutServices.getUserClusters(userExerciseInputValue)\n            setUserExerciseClusters(userExerciseClustersTemp)\n            setCurrentExercise(userExerciseClustersTemp[0].cluster.exercise.name)\n        }\n    }\n    \n    return (\n        <div className=\"user-progress\" >\n            <div className=\"choose-exercise\">\n                <label htmlFor=\"\">Exercise: </label>\n                <input list=\"exercises-list\"\n                        id=\"exercises\" \n                        placeholder='Choose an exercise...' \n                        onChange={handleExerciseInputChange}\n                />\n                <datalist id=\"exercises-list\">\n                    {filteredUserExercises.map( (exercise, index) => (\n                        <option key={index}> {exercise} </option>\n                    ))}\n                </datalist>\n                <label id=\"exercise-label\"> {`Current Exercise: ${currentExercise}`}</label>\n            </div>\n            <div className=\"user-progress-chart\">\n                <canvas id=\"exerciseProgressChart\" ref={chartCanvasRef}></canvas>\n            </div>\n        </div>\n    )\n}\n\nexport default UserProgressChart"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}