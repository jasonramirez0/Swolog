{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jasonramirez/Desktop/fitness-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from'react';import{Link}from'react-router-dom';import loginServices from'../services/login';import workoutServices from'../services/workouts';import UserContext from'../UserContext';import'./LoginForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(_ref){var username=_ref.username,setUsername=_ref.setUsername,password=_ref.password,setPassword=_ref.setPassword,setErrorMessage=_ref.setErrorMessage;var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),user=_useContext2[0],userDispatch=_useContext2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loginSuccessful=_useState2[0],setLoginSuccessful=_useState2[1];var handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var loggedInUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return loginServices.login({username:username,password:password});case 4:loggedInUser=_context.sent;window.localStorage.setItem('loggedFitnessAppUser',JSON.stringify(loggedInUser));workoutServices.setToken(loggedInUser.token);setUsername('');setPassword('');console.log(\"loggedInUser \".concat(loggedInUser));userDispatch({type:\"LOG IN\",user:loggedInUser});console.log(\" user \".concat(user));console.log('login successful');_context.next=20;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);console.log('login unsuccessful');setErrorMessage('Wrong credentials');setTimeout(function(){setErrorMessage(null);},5000);case 20:console.log(\"user \".concat(user));case 21:case\"end\":return _context.stop();}},_callee,null,[[1,15]]);}));return function handleLogin(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:function onChange(_ref3){var target=_ref3.target;return setUsername(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:function onChange(_ref4){var target=_ref4.target;return setPassword(target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"register-link\",children:\"Dont have an account? Register here.\"})]})});};export default LoginForm;","map":{"version":3,"names":["useState","useContext","Link","loginServices","workoutServices","UserContext","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","username","setUsername","password","setPassword","setErrorMessage","_useContext","_useContext2","_slicedToArray","user","userDispatch","_useState","_useState2","loginSuccessful","setLoginSuccessful","handleLogin","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","loggedInUser","wrap","_callee$","_context","prev","next","preventDefault","login","sent","window","localStorage","setItem","JSON","stringify","setToken","token","console","log","concat","type","t0","setTimeout","stop","_x","apply","arguments","className","children","onSubmit","htmlFor","id","value","onChange","_ref3","target","_ref4","to"],"sources":["/Users/jasonramirez/Desktop/fitness-app/frontend/src/components/LoginForm.js"],"sourcesContent":["import { useState, useContext } from 'react'\nimport { Link } from 'react-router-dom'\nimport loginServices from '../services/login'\nimport workoutServices from '../services/workouts'\nimport UserContext from '../UserContext'  \nimport './LoginForm.css'\n\nconst LoginForm = ({ username, setUsername, password, setPassword, setErrorMessage }) => {\n  \n  const [user, userDispatch] = useContext(UserContext)\n\n  const [loginSuccessful, setLoginSuccessful] = useState(false)\n  \n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n        const loggedInUser = await loginServices.login({ username, password })\n        window.localStorage.setItem('loggedFitnessAppUser', JSON.stringify(loggedInUser))\n        workoutServices.setToken(loggedInUser.token)\n        setUsername('')\n        setPassword('')\n        console.log(`loggedInUser ${loggedInUser}`)\n        userDispatch({ type: \"LOG IN\", user: loggedInUser })\n        console.log(` user ${user}`)\n        console.log('login successful')\n    } catch(exception) {\n        console.log('login unsuccessful')\n        setErrorMessage('Wrong credentials')\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n    }\n    console.log(`user ${user}`)\n}\n\n return (\n    <div className=\"login-container\">\n      <form className=\"login-form\" onSubmit={handleLogin}>\n        <div className=\"form-group\">\n          <label htmlFor=\"username\">Username</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            value={username}\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={({ target }) => setPassword(target.value)}\n          />\n        </div>\n        <button type=\"submit\">Login</button>\n        <Link to=\"/register\" className=\"register-link\">\n          Dont have an account? Register here.\n        </Link>\n      </form>\n    </div>\n  )\n}\n\nexport default LoginForm\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}